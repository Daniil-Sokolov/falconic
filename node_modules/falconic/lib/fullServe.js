'use strict';

const fs = require('fs');
const path = require('path');

const routing = require('../router');
const serve = require('./serve');
const statics = require('./statics');

//FULL SERVERING, WITH SWITCHING BITWIN OF STATIC FILES AND DINAMIC ROUTES
module.exports = (req, res)=> {
	const ext = path.extname(req.url).substring(1).toLowerCase();
	const data = routing[req.url];
	//res.setHeader('Process-Id', process.pid);
	if(!ext) return serve(data, req, res);
	return statics(data, req, res);
}